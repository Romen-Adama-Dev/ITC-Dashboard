<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>itc-dashboard-project documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">itc-dashboard-project documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">













<ol class="breadcrumb">
  <li class="breadcrumb-item">Interfaces</li>
  <li class="breadcrumb-item"
  >
  ExtendedGridsterItem</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/presentation/gridster2/gridster2.component.ts</code>
        </p>



            <p class="comment">
                <h3>Extends</h3>
            </p>
            <p class="comment">
                        <code>GridsterItem</code>
            </p>

        <section data-compodoc="block-index">
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#chartType" 
>
                                            chartType
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#dataCount" 
>
                                            dataCount
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#dataSource" 
>
                                            dataSource
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section data-compodoc="block-properties">
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="chartType"></a>
                                        <span class="name "><b>chartType</b>
                                            <a href="#chartType">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>chartType:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="dataCount"></a>
                                        <span class="name "><b>dataCount</b>
                                            <a href="#dataCount">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>dataCount:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="dataSource"></a>
                                        <span class="name "><b>dataSource</b>
                                            <a href="#dataSource">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>dataSource:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Component, OnInit } from &#x27;@angular/core&#x27;;
import { CommonModule } from &#x27;@angular/common&#x27;;
import { FormsModule } from &#x27;@angular/forms&#x27;;

// Angular Gridster2
import {
  CompactType,
  DisplayGrid,
  Draggable,
  GridsterComponent,
  GridsterConfig,
  GridsterItem,
  GridsterItemComponent,
  GridType,
  PushDirections,
  Resizable,
} from &#x27;angular-gridster2&#x27;;

// Ngx-translate
import { TranslateModule, TranslateService } from &#x27;@ngx-translate/core&#x27;;

// Ng Zorro
import { NzNotificationModule, NzNotificationService } from &#x27;ng-zorro-antd/notification&#x27;;
import { NzIconModule } from &#x27;ng-zorro-antd/icon&#x27;;

// Services
import { ChartDataService } from &#x27;../../application/entities/chart-data.service&#x27;;
import { MediatorService } from &#x27;../../application/services/mediator.service&#x27;;

// Shared Components
import { PrimaryButtonComponent } from &#x27;../components/shared/buttons/primary-button/primary-button.component&#x27;;
import { DefaultButtonComponent } from &#x27;../components/shared/buttons/default-button/default-button.component&#x27;;
import { FloatShapeButtonComponent } from &#x27;../components/shared/buttons/float-shape-button/float-shape-button.component&#x27;;
import { LanguageDropdownComponent } from &#x27;../components/shared/buttons/drop-button/drop-button.component&#x27;;
import { ThemeToggleButtonComponent } from &quot;../components/shared/buttons/theme-toggle-button.component&quot;;

// Chart Components
import { AreaChartComponent } from &#x27;../components/shared/data-view/area-chart/area-chart.component&#x27;;
import { LineChartComponent } from &#x27;../components/shared/data-view/line-chart/line-chart.component&#x27;;
import { AdvancedPieChartComponent } from &#x27;../components/shared/data-view/advanced-pie-chart/advanced-pie-chart.component&#x27;;
import { BoxChartComponent } from &#x27;../components/shared/data-view/box-chart/box-chart.component&#x27;;
import { BubbleChartComponent } from &#x27;../components/shared/data-view/bubble-chart/bubble-chart.component&#x27;;
import { GaugeChartComponent } from &#x27;../components/shared/data-view/gauge-chart/gauge-chart.component&#x27;;
import { HeatMapComponent } from &#x27;../components/shared/data-view/heat-chart/heat-chart.component&#x27;;
import { HorizontalBarChartComponent } from &#x27;../components/shared/data-view/horizontal-chart/horizontal-chart.component&#x27;;
import { LinearGaugeChartComponent } from &#x27;../components/shared/data-view/linear-gauge-chart/linear-gauge-chart.component&#x27;;
import { NormalizedAreaChartComponent } from &#x27;../components/shared/data-view/normalized-area-chart/normalized-area-chart.component&#x27;;
import { VerticalBarChartComponent } from &#x27;../components/shared/data-view/vertical-chart/vertical-chart.component&#x27;;
import { NormalizedHorizontalBarChartComponent } from &#x27;../components/shared/data-view/normalized-horizontal-bar-chart/normalized-horizontal-bar-chart.component&#x27;;
import { NormalizedVerticalBarChartComponent } from &#x27;../components/shared/data-view/normalized-vertical-bar-chart/normalized-vertical-bar-chart.component&#x27;;
import { NumberCardsComponent } from &#x27;../components/shared/data-view/number-chart/number-chart.component&#x27;;
import { PercentGaugeChartComponent } from &#x27;../components/shared/data-view/percent-gauge-chart/percent-gauge-chart.component&#x27;;
import { PieGridComponent } from &#x27;../components/shared/data-view/pie-grid/pie-grid.component&#x27;;
import { PieChartComponent } from &#x27;../components/shared/data-view/pie-chart/pie-chart.component&#x27;;
import { PolarChartComponent } from &#x27;../components/shared/data-view/polar-chart/polar-chart.component&#x27;;
import { StackedAreaChartComponent } from &#x27;../components/shared/data-view/stacked-area-chart/stacked-area-chart.component&#x27;;
import { StackedHorizontalBarChartComponent } from &#x27;../components/shared/data-view/stacked-horizontal-bar-chart/stacked-horizontal-bar-chart.component&#x27;;
import { StackedVerticalBarChartComponent } from &#x27;../components/shared/data-view/stacked-vertical-bar-chart/stacked-vertical-bar-chart.component&#x27;;
import { TreeMapComponent } from &#x27;../components/shared/data-view/tree-chart/tree-chart.component&#x27;;

// Modal Components
import { ChartSelectionModalComponent } from &#x27;../components/chart-selection-modal/chart-selection-modal.component&#x27;;
import { EditWidgetModalComponent } from &#x27;../components/edit-modal/edit-modal.component&#x27;;

// Interfaces
interface ExtendedGridsterItem extends GridsterItem {
  chartType?: string;
  dataSource?: string;
  dataCount?: string;
}

interface SafeGridsterConfig extends GridsterConfig {
  draggable: Draggable;
  resizable: Resizable;
  pushDirections: PushDirections;
}

@Component({
  selector: &#x27;app-gridster-dashboard&#x27;,
  standalone: true,
  imports: [
    CommonModule,
    FormsModule,
    GridsterComponent,
    GridsterItemComponent,
    PrimaryButtonComponent,
    DefaultButtonComponent,
    FloatShapeButtonComponent,
    LineChartComponent,
    VerticalBarChartComponent,
    ChartSelectionModalComponent,
    AdvancedPieChartComponent,
    AreaChartComponent,
    BoxChartComponent,
    BubbleChartComponent,
    GaugeChartComponent,
    HeatMapComponent,
    HorizontalBarChartComponent,
    LinearGaugeChartComponent,
    NormalizedAreaChartComponent,
    NormalizedHorizontalBarChartComponent,
    NormalizedVerticalBarChartComponent,
    NumberCardsComponent,
    PercentGaugeChartComponent,
    PieChartComponent,
    PieGridComponent,
    PolarChartComponent,
    StackedAreaChartComponent,
    StackedHorizontalBarChartComponent,
    StackedVerticalBarChartComponent,
    TreeMapComponent,
    EditWidgetModalComponent,
    NzNotificationModule,
    NzIconModule,
    TranslateModule,
    ThemeToggleButtonComponent,
    LanguageDropdownComponent
  ],
  templateUrl: &#x27;./gridster2.component.html&#x27;,
  styleUrls: [&#x27;./gridster2.component.scss&#x27;]
})
export class GridsterDashboardComponent implements OnInit {
  // Gridster options and dashboard state
  options!: SafeGridsterConfig;
  dashboard!: ExtendedGridsterItem[];

  // UI State
  isModalVisible &#x3D; false;
  isEditModalVisible &#x3D; false;
  currentEditItem: ExtendedGridsterItem | null &#x3D; null;
  currentTheme: &#x27;default&#x27; | &#x27;dark&#x27; &#x3D; &#x27;default&#x27;;

  // Language
  readonly languages &#x3D; [
    { code: &#x27;en&#x27;, label: &#x27;English&#x27; },
    { code: &#x27;es&#x27;, label: &#x27;Español&#x27; },
    { code: &#x27;fr&#x27;, label: &#x27;Français&#x27; },
    { code: &#x27;de&#x27;, label: &#x27;Deutsch&#x27; },
    { code: &#x27;zh&#x27;, label: &#x27;中文&#x27; }
  ];
  selectedLanguage &#x3D; &#x27;en&#x27;;

  // Chart selection
  selectedChartType:
    | &#x27;line-chart&#x27;
    | &#x27;advanced-pie-chart&#x27;
    | &#x27;area-chart&#x27;
    | &#x27;box-chart&#x27;
    | &#x27;bubble-chart&#x27;
    | &#x27;gauge-chart&#x27;
    | &#x27;vertical-bar-chart&#x27;
    | &#x27;heat-map&#x27;
    | &#x27;horizontal-bar&#x27;
    | &#x27;linear-gauge-chart&#x27;
    | &#x27;normalized-area-chart&#x27;
    | &#x27;normalized-horizontal-chart&#x27;
    | &#x27;normalized-vertical-chart&#x27;
    | &#x27;number-chart&#x27;
    | &#x27;percent-gauge-chart&#x27;
    | &#x27;pie-chart&#x27;
    | &#x27;pie-grid-chart&#x27;
    | &#x27;polar-chart&#x27;
    | &#x27;stacked-area-chart&#x27;
    | &#x27;stacked-horizontal-bar-chart&#x27;
    | &#x27;stacked-vertical-bar-chart&#x27;
    | &#x27;tree-map&#x27;
    | &#x27;vertical-bar&#x27; &#x3D; &#x27;advanced-pie-chart&#x27;;

  // Gridster push items
  pushItemsEnabled &#x3D; true;

  constructor(
    private readonly chartDataService: ChartDataService,
    private readonly notification: NzNotificationService,
    private readonly mediator: MediatorService,
    private readonly translate: TranslateService,
  ) {}

  // --- Lifecycle ---
  ngOnInit(): void {
    this.initMediator();
    this.initTheme();
    this.initTranslation();
    this.initGridsterOptions();
    this.dashboard &#x3D; [];
  }

  // --- Initialization ---
  private initMediator(): void {
    this.mediator.events$.subscribe(event &#x3D;&gt; {
      this.mediator.emit(event);
    });
  }

  private initTheme(): void {
    const prefersDark &#x3D; window.matchMedia(&#x27;(prefers-color-scheme: dark)&#x27;).matches;
    this.currentTheme &#x3D; prefersDark ? &#x27;dark&#x27; : &#x27;default&#x27;;
    const darkLink &#x3D; document.getElementById(&#x27;dark-theme-css&#x27;) as HTMLLinkElement | null;
    if (darkLink) {
      darkLink.disabled &#x3D; this.currentTheme !&#x3D;&#x3D; &#x27;dark&#x27;;
    }
  }

  private initTranslation(): void {
    this.translate.setDefaultLang(this.selectedLanguage);
    this.translate.use(this.selectedLanguage);
  }

  private initGridsterOptions(): void {
    this.options &#x3D; {
      gridType: GridType.Fixed,
      compactType: CompactType.None,
      margin: 1,
      outerMargin: false,
      outerMarginTop: null,
      outerMarginRight: null,
      outerMarginBottom: null,
      outerMarginLeft: null,
      useTransformPositioning: true,
      mobileBreakpoint: 640,
      useBodyForBreakpoint: false,
      minCols: 5,
      maxCols: 10,
      minRows: 5,
      maxRows: 10,
      minItemCols: 1,
      maxItemCols: 10,
      minItemRows: 1,
      maxItemRows: 10,
      minItemArea: 1,
      maxItemArea: 2500,
      defaultItemCols: 5,
      defaultItemRows: 5,
      fixedColWidth: 249,
      fixedRowHeight: 249,
      keepFixedWidthInMobile: false,
      keepFixedHeightInMobile: false,
      scrollSensitivity: 10,
      scrollSpeed: 20,
      enableEmptyCellClick: false,
      enableEmptyCellContextMenu: false,
      enableEmptyCellDrop: false,
      enableEmptyCellDrag: false,
      enableOccupiedCellDrop: false,
      emptyCellDragMaxCols: 50,
      emptyCellDragMaxRows: 50,
      ignoreMarginInRow: false,
      draggable: { enabled: true },
      resizable: { enabled: true },
      swap: false,
      pushItems: this.pushItemsEnabled,
      disablePushOnDrag: false,
      disablePushOnResize: false,
      pushDirections: { north: true, east: true, south: true, west: true },
      pushResizeItems: false,
      displayGrid: DisplayGrid.None,
      disableWindowResize: false,
      disableWarnings: false,
      scrollToNewItems: false
    };
  }

  // --- Gridster Events ---
  static itemChange(item: GridsterItem, itemComponent: any): void {
    console.info(&#x27;itemChanged&#x27;, item, itemComponent);
  }

  static itemResize(item: GridsterItem, itemComponent: any): void {
    console.info(&#x27;itemResized&#x27;, item, itemComponent);
  }

  // --- Dashboard Actions ---
  addItem(): void {
    if (!this.selectedChartType) {
      alert(&#x27;Please select a chart type.&#x27;);
      return;
    }
    const newId &#x3D; this.dashboard.length
      ? Math.max(...this.dashboard.map(i &#x3D;&gt; i[&#x27;id&#x27;])) + 1
      : 1;
    this.dashboard.push({
      id: newId,
      cols: 1,
      rows: 1,
      x: 0,
      y: 0,
      chartType: this.selectedChartType
    });
  }

  onAddChart(selection: { chartType: string; dataSource: string; dataCount: string }): void {
    this.selectedChartType &#x3D; selection.chartType as any;
    const newId &#x3D; this.dashboard.length
      ? Math.max(...this.dashboard.map(i &#x3D;&gt; i[&#x27;id&#x27;])) + 1
      : 1;
    this.dashboard.push({
      id: newId,
      cols: 1,
      rows: 1,
      x: 0,
      y: 0,
      chartType: this.selectedChartType,
      dataSource: selection.dataSource,
      dataCount: selection.dataCount
    });
    this.notification.success(
      this.translate.instant(&#x27;SUCCESS&#x27;),
      this.translate.instant(&#x27;NOTIF.SUCCESS_WIDGET_CREATED&#x27;)
    );
  }

  editItem(item: ExtendedGridsterItem): void {
    this.currentEditItem &#x3D; item;
    this.currentEditItem[&#x27;dataCount&#x27;] ??&#x3D; &#x27;all&#x27;;
    this.isEditModalVisible &#x3D; true;
  }

  handleWidgetEditSave(update: { dataCount: string; dataSource: string }): void {
    if (!this.currentEditItem) return;
    this.currentEditItem[&#x27;dataCount&#x27;] &#x3D; update.dataCount;
    this.currentEditItem[&#x27;dataSource&#x27;] &#x3D; update.dataSource;
    this.reloadWidgetData(this.currentEditItem);
    this.notification.warning(&#x27;Warning&#x27;, &#x27;Widget modificado correctamente.&#x27;);
    this.handleEditModalClose();
  }

  handleEditModalClose(): void {
    this.isEditModalVisible &#x3D; false;
  }

  removeItem(item: ExtendedGridsterItem): void {
    this.dashboard.splice(this.dashboard.indexOf(item), 1);
    this.notification.warning(
      this.translate.instant(&#x27;WARNING&#x27;),
      this.translate.instant(&#x27;NOTIF.WARN_WIDGET_DELETED&#x27;)
    );
  }

  reloadWidgetData(item: ExtendedGridsterItem): void {
    const dataSource &#x3D; item.dataSource ?? &#x27;/assets/datasets/data-set-1.json&#x27;;
    this.chartDataService.loadChartsData(dataSource).subscribe({
      next: () &#x3D;&gt; console.log(&#x60;✅ Datos recargados desde ${dataSource}&#x60;),
      error: err &#x3D;&gt; console.error(&#x27;❌ Error al recargar datos:&#x27;, err)
    });
  }

  // --- Modal Actions ---
  openCustomModal(): void {
    this.isModalVisible &#x3D; true;
    this.notification.info(
      this.translate.instant(&#x27;INFO&#x27;),
      this.translate.instant(&#x27;NOTIF.INFO_MODAL_OPEN&#x27;)
    );
  }

  closeCustomModal(): void {
    this.isModalVisible &#x3D; false;
  }

  // --- Serialization ---
  serializeToJson(): void {
    const name &#x3D; prompt(&#x27;Nombre de archivo:&#x27;, &#x27;dashboardConfig&#x27;) ?? &#x27;dashboardConfig&#x27;;
    const blob &#x3D; new Blob([JSON.stringify(this.dashboard, null, 2)], { type: &#x27;application/json&#x27; });
    const a &#x3D; document.createElement(&#x27;a&#x27;);
    a.href &#x3D; URL.createObjectURL(blob);
    a.download &#x3D; &#x60;${name}.json&#x60;;
    a.click();
    URL.revokeObjectURL(a.href);
    this.notification.info(&#x27;Info&#x27;, &#x27;Dashboard serializado correctamente.&#x27;);
  }

  loadJsonFromFile(event: any): void {
    const file &#x3D; event.target.files[0];
    if (!file) return;
    this.changedOptions();
    const reader &#x3D; new FileReader();
    reader.onload &#x3D; e &#x3D;&gt; {
      try {
        this.dashboard &#x3D; JSON.parse((e.target as any).result);
        this.options.api?.optionsChanged?.();
        this.notification.success(&#x27;Success&#x27;, &#x27;Dashboard cargado desde JSON.&#x27;);
      } catch {
        console.error(&#x27;Error parsing JSON&#x27;);
      }
    };
    reader.readAsText(file);
  }

  deserialize(json: string): void {
    try {
      const arr &#x3D; JSON.parse(json);
      if (Array.isArray(arr)) {
        arr.forEach(item &#x3D;&gt; {
          const idx &#x3D; this.dashboard.findIndex(d &#x3D;&gt; d[&#x27;id&#x27;] &#x3D;&#x3D;&#x3D; item[&#x27;id&#x27;]);
          if (idx &gt;&#x3D; 0) this.dashboard[idx] &#x3D; { ...this.dashboard[idx], ...item };
          else this.dashboard.push(item);
        });
        this.options.api?.optionsChanged?.();
        this.notification.success(&#x27;Success&#x27;, &#x27;Dashboard actualizado con JSON.&#x27;);
      }
    } catch {
      console.error(&#x27;Error deserializing JSON&#x27;);
    }
  }

  deserializeFromFile(event: any): void {
    const file &#x3D; event.target.files[0];
    if (!file) return;
    const reader &#x3D; new FileReader();
    reader.onload &#x3D; e &#x3D;&gt; {
      this.deserialize((e.target as any).result);
      this.options.api?.optionsChanged?.();
    };
    reader.readAsText(file);
  }

  // --- Gridster Options ---
  togglePushItems(): void {
    this.pushItemsEnabled &#x3D; !this.pushItemsEnabled;
    this.options.pushItems &#x3D; this.pushItemsEnabled;
    this.options.api?.optionsChanged?.();
    this.notification.info(&#x27;Info&#x27;, this.pushItemsEnabled ? &#x27;Widgets desbloqueados.&#x27; : &#x27;Widgets bloqueados.&#x27;);
  }

  changedOptions(): void {
    this.dashboard &#x3D; [];
    this.options.api?.optionsChanged?.();
    this.notification.warning(
      this.translate.instant(&#x27;WARNING&#x27;),
      this.translate.instant(&#x27;NOTIF.WARN_WIDGETS_CLEARED&#x27;)
    );
  }

  // --- Theme &amp; Language ---
  onToggleTheme(): void {
    const darkLink &#x3D; document.getElementById(&#x27;dark-theme-css&#x27;) as HTMLLinkElement;
    if (this.currentTheme &#x3D;&#x3D;&#x3D; &#x27;default&#x27;) {
      darkLink.disabled &#x3D; false;
      this.currentTheme &#x3D; &#x27;dark&#x27;;
    } else {
      darkLink.disabled &#x3D; true;
      this.currentTheme &#x3D; &#x27;default&#x27;;
    }
  }

  onLanguageChange(lang: string): void {
    this.selectedLanguage &#x3D; lang;
    this.translate.use(lang);
  }

  // --- Utility ---
  trackByFn(_i: number, item: ExtendedGridsterItem): number {
    return item[&#x27;id&#x27;];
  }
}</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'ExtendedGridsterItem.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
